---
description: "Creates a long-running ChatGPT enrichment task for a lead."
title: "Create Enrichment Task"
icon: "sparkles"
og:image: "https://firebasestorage.googleapis.com/v0/b/thred-ai.appspot.com/o/Marketing%2Fdocs.png?alt=media"
---

## Endpoint

```
POST https://api.thred.dev/v1/customers/enrich
```

## Authentication

Include your API key in the Authorization header:

```
Authorization: Bearer YOUR_API_KEY
```

## Request Body

| Field      | Type   | Required | Description                                 |
| ---------- | ------ | -------- | ------------------------------------------- |
| `leadData` | object | Yes      | Lead information to use for chat enrichment |

### Lead Data Fields

| Field       | Type    | Description                                                               |
| ----------- | ------- | ------------------------------------------------------------------------- |
| `name`      | string  | Lead's name                                                               |
| `email`     | string  | Lead's email (used for customer identification)                           |
| `company`   | string  | Company name                                                              |
| `role`      | string  | Job title (optional)                                                      |
| `discovery` | boolean | Set to `true` if the chat is a discovery conversation (defaults to false) |

Additional custom fields are supported.

## Response

### Success (201 Created)

```json
{
  "customerId": "k17f5j9m8k7j5n4m3k2j1h0g9f8e7d6c",
  "email": "john@acme.com",
  "status": "processing",
  "message": "Customer created, chat processing."
}
```

### Error (400/401/500)

```json
{
  "error": "Error type",
  "message": "Error description"
}
```

## Example

```bash
# Direct mode (customer knows about your business)
curl -X POST https://api.thred.dev/v1/customers/enrich \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "leadData": {
      "name": "Sarah Johnson",
      "email": "sarah@example.com",
      "company": "TechCorp",
      "role": "VP of Engineering",
    }
  }'

# Discovery mode (customer is exploring options)
curl -X POST https://api.thred.dev/v1/customers/enrich \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "leadData": {
      "name": "Sarah Johnson",
      "email": "sarah@example.com",
      "company": "TechCorp",
      "role": "VP of Engineering",
      "discovery": true
    }
  }'
```

```javascript
// Direct mode
const response = await fetch('https://api.thred.dev/v1/customers/enrich', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    leadData: {
      name: "Sarah Johnson",
      email: "sarah@example.com",
      company: "TechCorp",
      role: "VP of Engineering",
    }
  })
});

// Discovery mode
const discoveryResponse = await fetch('https://api.thred.dev/v1/customers/enrich', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    leadData: {
      name: "Sarah Johnson",
      email: "sarah@example.com",
      company: "TechCorp",
      role: "VP of Engineering",
      discovery: true
    }
  })
});

const result = await response.json();
console.log(result.customerId); // Use this to poll for completion
```